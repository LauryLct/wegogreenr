<div class="event-pic-show">
  <%= cl_image_tag @activity.photo %>
</div>
<div class="container">
  <div class="event-txt-show">
    <h1><strong><%= @activity.name %></strong> - <%= link_to edit_activity_path(@activity) do  %>
        <i class="far fa-edit"></i>
      <% end %>
    </h1>
    <div class="avg-rate-display">
      <% if @activity.starting_date.blank? == false %>
        <p>Du <%= @activity.starting_date.strftime("%d-%m-%Y") %> au <%= @activity.ending_date.strftime("%d-%m-%Y") %></p>
      <% end %>
    </div>
    <div class = "d-flex star-rating justify-content-between">
      <% unless current_user.nil? %>
        <% if @activity.reviews.pluck(:user_id).include?(current_user.id)  %>
          <%= "Vous avez déjà voté" %>
        <% elsif %>
          <%= simple_form_for([@activity, @review], html: { class: "review_form" }) do |r| %>
            <%= r.input :rate, class: "shadow-sm p-3 mb-5 bg-white rounded", label: false, collection: [1, 2, 3, 4, 5 ] %>
            <%= r.button :submit, class: "d-none" %>
          <% end %>
        <% end %>
      <% end %>
      <% if @activity.reviews.blank? == false %>
        <p class="avg-rate-display"><strong><%= @activity.reviews.average(:rate).to_f.round(1) %><%= "/5" %></strong></p>
      <% elsif %>
        <p class="avg-rate-display"><strong><%= "-/5" %></strong></p>
      <% end %>
      <% if @activity.reviews.count != 0 %>
        <p class="avg-rate-display"><strong>(<%= @activity.reviews.count %> avis)</strong></p>
      <% elsif %>
        <p class="avg-rate-display"><strong>(Pas d'avis pour le moment)</strong></p>
      <% end %>
    </div>
    <h2>Adresse: </h2>
    <p><i><%= @activity.street %>, <%= @activity.zipcode %>, <%= @activity.city %>.</i></p>
    <h2>URL: </h2>
    <span><%= link_to "Site web", @activity.url, target: :_blank, class: "url-show-activity"%></span>
    <h2>Description:</h2>
    <p><%= @activity.description %></p>
  </div>
  <%= render 'message_box', activity: @activity %>
  <%= render 'messages_send_form', activity: @activity%>
</div>
